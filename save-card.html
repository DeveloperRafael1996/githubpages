<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="jquery.min.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> -->
</head>
<body>
    <script src="https://js.culqi.com/checkout-js"></script>
    <script type="module">

        const publicKey = "pk_test_40d71bf94bdf8637";

        const request = {
            title: "Guardar Tarjeta",
            //currency_code: "PEN",
            //amount: 16000,
            //orderId: "",
            first_name: "Dennis",
            last_name: "Sanchez",
            phone_number: "931408927"
        }; 

        const settings = {
            title: request.title,
            //currency: request.currency_code,
            //amount: request.amount,
            //order: request.orderId,
            // xculqirsaid: 'xxxxxxxxxxxxxxxxxxxxxxx',
            // rsapublickey: 'xxxxxxxxxxxxxxxyyyyyyyyyy',
        };

        /*
            const settings = {
                title: 'Belity',
                currency: 'PEN', 
                amount: 8000,
                //order: 'ord_live_0CjjdWhFpEAZlxlz', // Este parámetro es requerido para realizar pagos con pagoEfectivo, billeteras y Cuotéalo
                //xculqirsaid: 'xxxxxxxxxxxxxxxxxxxxxxx',
                //rsapublickey: 'xxxxxxxxxxxxxxxyyyyyyyyyy',
            }
        */

        const client = {
          //email: 'rguevara@belity.app',
          email: 'djzm80@gmail.com',
        }

        const appearance = {
            theme: "default",
            hiddenCulqiLogo: false,
            hiddenBannerContent: false,
            hiddenBanner: false,
            hiddenToolBarAmount: false,
            menuType: "sliderTop", // default/sidebar / sliderTop / select
            buttonCardPayText: "Guardar",
            //logo: "https://static.culqi.com/v2/v2/static/img/logo.png",
            logo: "https://belity.app/images/icon_base.png",
            defaultStyle: {
                bannerColor: "", // hexadecimal
                buttonBackground: "", // hexadecimal
                menuColor: "", // hexadecimal
                linksColor: "", // hexadecimal
                buttonTextColor: "", // hexadecimal
                priceColor: ""
            },
	    };

        const paymentMethods = {// las opciones se ordenan según se configuren
            tarjeta: true,
            yape: false,
            billetera: false,
            bancaMovil: false,
            agente: false,
            cuotealo: false,	
	    }

        const options = {
            lang: 'es',
            installments: false, // Habilitar o deshabilitar el campo de cuotas
            modal: true,
            container: "#culqi-container", // Opcional - Div donde quieres cargar el checkout
            paymentMethods: paymentMethods,
            paymentMethodsSort: Object.keys(paymentMethods), // las opciones se ordenan según se configuren en paymentMethods
        }

        const config = {
            settings,
            client,
            options,
            appearance
        };

        const Culqi = new CulqiCheckout(publicKey, config);


        Culqi.culqi = () => {
            if (Culqi.token) {
                Culqi.close();

                const tokenId = Culqi.token.id;
                const email = Culqi.token.email;

                console.info(Culqi.token)
                console.log('Save Tarjeta')

                //charges(Culqi.token);

            }
            else if(Culqi.order) {
                Culqi.close();
                const order = Culqi.order;

                //console.info(order);
                //console.log('Order')

            }
            else {
                //console.error('Error')
                //console.error(Culqi.error)
                //alert('Error Generar Token');
                //$("#response-panel").show();
                //$("#response").html(Culqi.error.merchant_message);
                //$("body").waitMe("hide");
            }
        };


        async function charges(token, parameters3DS = null) {
            
        }   

        Culqi.initCheckout();
        

        Culqi.closeCheckout = () => {
            console.log("Close... ");
            Culqi.close();

        };

      </script>
    </script>

    <iframe id="modalFrame" src="modal.html" style="width: 0; height: 0; border: none;"></iframe>

</body>
</html>






