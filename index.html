<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Culqi Belity</title>
    <meta name="description" content="Integraction CulqiOnline">
    <meta name="author" content="Rafael Guevara Aller">
</head>
<body>
    <script src="https://js.culqi.com/checkout-js"></script>
    <script type="module">

        const publicKey = "pk_test_40d71bf94bdf8637";

        const settings = {
          title: 'Belity',
          currency: 'PEN', 
          amount: 8000,
          order: 'ord_live_0CjjdWhFpEAZlxlz', // Este parámetro es requerido para realizar pagos con pagoEfectivo, billeteras y Cuotéalo
          //xculqirsaid: 'xxxxxxxxxxxxxxxxxxxxxxx',
          //rsapublickey: 'xxxxxxxxxxxxxxxyyyyyyyyyy',
        }

        const client = {
          email: 'rguevara@belity.app',
        }

        const appearance = {
            theme: "default",
            hiddenCulqiLogo: false,
            hiddenBannerContent: false,
            hiddenBanner: false,
            hiddenToolBarAmount: false,
            menuType: "sliderTop", // default/sidebar / sliderTop / select
            //logo: "https://static.culqi.com/v2/v2/static/img/logo.png",
            logo: "https://belity.app/images/icon_base.png",
            defaultStyle: {
                //bannerColor: "#6434ff", // hexadecimal
                buttonBackground: "", // hexadecimal
                menuColor: "", // hexadecimal
                linksColor: "", // hexadecimal
                buttonTextColor: "", // hexadecimal
                priceColor: "",
            },
	    };

        const paymentMethods = {// las opciones se ordenan según se configuren
            tarjeta: true,
            yape: true,
            billetera: false,
            bancaMovil: false,
            agente: false,
            cuotealo: false,	
	    }

        const options = {
            lang: 'es',
            installments: false, // Habilitar o deshabilitar el campo de cuotas
            modal: true,
            container: "#culqi-container", // Opcional - Div donde quieres cargar el checkout
            paymentMethods: paymentMethods,
            paymentMethodsSort: Object.keys(paymentMethods), // las opciones se ordenan según se configuren en paymentMethods
        }

        const config = {
            settings,
            client,
            options,
            appearance
        };

        const Culqi = new CulqiCheckout(publicKey, config);


        Culqi.culqi = () => {
            if (Culqi.token) {
                Culqi.close();

                const tokenId = Culqi.token.id;
                const email = Culqi.token.email;

                console.info(Culqi.token)
                console.log('Pay')

            }
            else if(Culqi.order) {
                Culqi.close();
                const order = Culqi.order;

                console.info(order);
                console.log('Order')

            }
            else {
                console.error('Error')
                console.error(Culqi.error)
                
                alert(Culqi.error.user_message);
                // $("#response-panel").show();
                // $("#response").html(Culqi.error.merchant_message);
                // $("body").waitMe("hide");
            }
        };


        Culqi.initCheckout();
        
        // const btn_pagar = document.getElementById('btn_pagar');
            // btn_pagar.addEventListener('click', function (e) {
            //     Culqi.open();
            //     e.preventDefault();
        // })

        Culqi.closeCheckout = () => {
            console.log("se cerró el checkout... ");
        };

      </script>
    </script>

</body>
</html>

